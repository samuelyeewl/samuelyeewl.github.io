<div class="photo-container">
{% assign story_path = page.imgdir | prepend: "stories/" |  append: "/" %}
{% assign dev_path = page.imgdir | prepend: "stories/" | prepend: site.dev_asset_path | append: "/" %}
{% capture dev_path_exists %}{% file_exists {{ page.cover | prepend: dev_path | prepend: "/" | append: '.jpg' }} %}{% endcapture %}

{% assign image_list = include.images | split: ', ' %}
{% for image in image_list %}
	{% assign props = image | split: ' ' %}
	{% assign pos = props[1] %}
	{% case pos %}
		{% when 'full' %}
			{% assign sizes = '100vw' %}
		{% when 'one' %}
			{% assign sizes = '100%' %}
		{% when 'two' %}
			{% assign sizes = '(min-width: 48em) 49.5%, 100%' %}
		{% when 'three' %}
			{% assign sizes = '(min-width: 48em) 32.6%, 100%' %}
		{% else %}
			{% assign sizes = '(min-width: 48em) 49.5%, 100%' %}
	{% endcase %}
    {% if dev_path_exists == "true" and jekyll.environment == "development" %}
	{% assign image_path = props[0] | prepend: dev_path | prepend: '/' | append: '.jpg' %}
	<img src="{{ image_path }}"
	     sizes="{{ sizes }}"
		 class="img-{{ pos }} enlargeable-image"
         data-src="{{ image_path }}"
         style="cursor: pointer;" />
	{% else %}
	{% assign image_path = props[0] | prepend: story_path | append: '.jpg' %}
	<img srcset="{{ image_path | prepend: 'w_2880,c_limit/' | prepend: site.asset_path }}	2880w,
				 {{ image_path | prepend: 'w_1920,c_limit/' | prepend: site.asset_path }}	1920w,
				 {{ image_path | prepend: 'w_1366,c_limit/' | prepend: site.asset_path }}	1366w,
				 {{ image_path | prepend: 'w_850,c_limit/' | prepend: site.asset_path }}	850w,
				 {{ image_path | prepend: 'w_420,c_limit/' | prepend: site.asset_path }}	420w"
		 sizes="{{ sizes }}"
		 src="{{ image_path | prepend: site.asset_path }}"
		 class="img-{{ pos }} enlargeable-image"
         data-src="{{ image_path | prepend: 'w_2880,c_limit/' | prepend: site.asset_path }}"
         style="cursor: pointer;" />
	{% endif %}
{% endfor %}
</div>
