---
---

{% assign max_authors = 5 %}

{% if entry.abbr %}
  {% if site.data.venues[entry.abbr] %}
    <abbr>[<a href="{{site.data.venues[entry.abbr].url}}" target="_blank">{{entry.abbr}}</a>]</abbr>
  {% else %}
    <abbr>[{{entry.abbr}}]</abbr>
  {% endif %}
{% endif %}

<div id="{{entry.key}}">
  {% if entry.type == "thesis" %}
    {{reference}}
  {% else %}
    <span class="title">{{entry.title}}</span>
    <span class="author">
      {% if entry.author_array.size > max_authors %}
        {% assign has_site_author = false %}
        {% assign first_authors = entry.author_array | slice: 0, max_authors %}
        {% assign remaining_authors = entry.author_array | slice: max_authors, entry.author_array.size %}
        {% for author in first_authors %}
          {% if author.last == site.scholar.last_name %}
            <em>{{author.last}}, {{author.first}}</em>,
            {% assign has_site_author = true %}
          {% else %}
            {{author.last}}, {{author.first}},
          {% endif %}
        {% endfor %}
        <span class="author showauth">
        {% if has_site_author %}
          <a class="showauth">and {{ entry.author_array.size | minus: max_authors }} more authors.</a>
        {% else %}
          <a class="showauth">and {{ entry.author_array.size | minus: max_authors }} more authors, including <em>{{site.scholar.last_name}}, {{site.scholar.first_initials}}</em>.</a>
        {% endif %}
        </span>
        <span class="extraauth author hidden">
          {% for author in remaining_authors %}
            {% if forloop.last %}
              {% if author.last == site.scholar.last_name %}
                and <em>{{author.last}}, {{author.first}}</em>
              {% else %}
                and {{author.last}}, {{author.first}}
              {% endif %}
            {% else %}
              {% if author.last == site.scholar.last_name %}
                <em>{{author.last}}, {{author.first}}</em>,
              {% else %}
                {{author.last}}, {{author.first}},
              {% endif %}            
            {% endif %}
          {% endfor %}
          <span class="author hideauth"><a class="hideauth"> (hide).</a></span>
        </span>
      {% else %}
        {% for author in entry.author_array %}
            {% unless forloop.last %}
            {% if author.last == site.scholar.last_name %}
                <em>{{author.last}}, {{author.first}}</em>,
            {% else %}
                {% if site.data.coauthors[author.last] %}
                <a href="{{site.data.coauthors[author.last].url}}" target="_blank">{{author.last}}, {{author.first}}</a>,
                {% else %}
                {{author.last}}, {{author.first}},
                {% endif %}
            {% endif %}
            {% else %}
            and
            {% if author.last == site.scholar.last_name %}
                <em>{{author.last}}, {{author.first}}</em>
            {% else %}
                {% if site.data.coauthors[author.last] %}
                <a href="{{site.data.coauthors[author.last].url}}" target="_blank">{{author.last}}, {{author.first}}</a>
                {% else %}
                {{author.last}}, {{author.first}}
                {% endif %}
            {% endif %}
            {% endunless %}
        {% endfor %}
      {% endif %}
      {% if entry.year %}
        ({{entry.year}})
      {% endif %}
    </span>

    <span class="periodical">
    {%- if entry.type == "article" -%}
      <em>{{- entry.journal -}}</em>
    {%- elsif entry.type == "inproceedings" -%}
      <em>In {{entry.booktitle}}</em>
    {%- endif -%}
    {%- if entry.volume -%}
    , <strong>{{entry.volume}}</strong>
    {%- endif -%}
    {%- if entry.pages -%}
    , {{entry.pages}}
    {%- endif -%}
    </span>
  {% endif %}

  <span class="links">
  {% if entry.abstract %}
    [<a class="abstract">Abs</a>]
  {% endif %}
  {% if entry.arxiv %}
    [<a href="http://arxiv.org/abs/{{ entry.arxiv }}" target="_blank">arXiv</a>]
  {% endif %}
  {% if entry.url %}
    [<a href="{{ entry.url }}" target="_blank">URL</a>]
  {% endif %}
  {% if entry.pdf %}
    [<a href="{{ entry.pdf | prepend: '/assets/pdf/' | prepend: site.baseurl | prepend: site.url }}" target="_blank">PDF</a>]
  {% endif %}
  {% if entry.supp %}
    [<a href="{{ entry.supp | prepend: '/assets/pdf/' | prepend: site.baseurl | prepend: site.url }}" target="_blank">Supp</a>]
  {% endif %}
  {% if entry.poster %}
    [<a href="{{ entry.poster | prepend: '/assets/pdf/' | prepend: site.baseurl | prepend: site.url }}" target="_blank">Poster</a>]
  {% endif %}
  {% if entry.slides %}
    [<a href="{{ entry.slides | prepend: '/assets/pdf/' | prepend: site.baseurl | prepend: site.url }}" target="_blank">Slides</a>]
  {% endif %}
  {% if entry.code %}
    [<a href="{{ entry.code }}" target="_blank">Code</a>]
  {% endif %}
  </span>

  <!-- Hidden abstract block -->
  {% if entry.abstract %}
  <span class="abstract hidden">
    <p>{{ entry.abstract }}</p>
  </span>
  {% endif %}
</div>
